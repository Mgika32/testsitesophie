<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administration - France Services</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style-dashboard.css"> 
</head>
<body> <nav class="sidebar">
        <div class="logo">
            <i class="fa-solid fa-gauge-high" aria-hidden="true"></i>
            <span>AS</span> Admin
        </div>
        <a href="#" class="menu-item active">
            <i class="fa-solid fa-chart-line" aria-hidden="true"></i> Tableau de bord
        </a>
        <a href="index.html" class="menu-item" target="_blank">
            <i class="fa-solid fa-globe" aria-hidden="true"></i> Voir le site
        </a>
        <div style="margin-top: auto; font-size: 0.8rem; opacity: 0.7;">
            Serveur v2.0
        </div>
    </nav>

    <main class="main-content">
        <header class="header">
            <h1>Demandes & Statistiques</h1>
            <div class="action-bar">
                <button class="export-btn" onclick="exportCSV()">
                    <i class="fa-solid fa-file-csv" aria-hidden="true"></i> Exporter CSV
                </button>
                <button class="refresh-btn" onclick="fetchData()">
                    <i class="fa-solid fa-arrows-rotate" aria-hidden="true"></i> Actualiser
                </button>
            </div>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-title">Total Demandes</div>
                <div class="stat-value" id="count-total">0</div>
            </div>
            <div class="stat-card" style="border-color: #f59e0b;">
                <div class="stat-title">Statut Nouveau</div>
                <div class="stat-value" id="count-new">0</div>
            </div>
            <div class="stat-card" style="border-color: #10b981;">
                <div class="stat-title">Statut Traités</div>
                <div class="stat-value" id="count-done">0</div> 
            </div>
            <div class="stat-card stat-traffic">
                <div class="stat-title">Vues Total Site</div>
                <div class="stat-value" id="stat-views">0</div>
            </div>
            <div class="stat-card stat-unique">
                <div class="stat-title">IP Uniques</div>
                <div class="stat-value" id="stat-ips">0</div>
            </div>
        </div>
        
        <div class="filter-bar">
            <input type="text" id="searchInput" placeholder="Rechercher (Nom, Email, Sujet...)" style="flex-grow: 1;">
            
            <select id="priorityFilter">
                <option value="all">Toute Priorité</option>
                <option value="Haute" class="prio-Haute">Haute</option>
                <option value="Moyenne" class="prio-Moyenne">Moyenne</option>
                <option value="Basse" class="prio-Basse">Basse</option>
            </select>
            
            <select id="statusFilter">
                <option value="all">Tout Statut</option>
                <option value="Nouveau" class="badge-Nouveau">Nouveau</option>
                <option value="Traitée" class="badge-Traitée">Traitée</option>
                <option value="Archivée" class="badge-Archivée">Archivée</option>
            </select>
            
        </div>

        <div class="table-container">
            <div id="loading">Chargement des données...</div>
            <table id="dataTable" style="display: none;">
                <thead>
                    <tr>
                        <th width="8%">Date</th>
                        <th width="15%">Citoyen</th>
                        <th width="15%">Contact</th>
                        <th width="32%">Service & Sujet</th>
                        <th width="10%">Priorité</th> 
                        <th width="10%">Statut</th>
                        <th width="10%">Actions</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    </tbody>
            </table>
        </div>
    </main>

    <script src="app.js"></script>
</body>
</html>